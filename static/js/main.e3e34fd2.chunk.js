(this["webpackJsonpudc-pa-shop"]=this["webpackJsonpudc-pa-shop"]||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"loading",(function(){return x})),a.d(r,"loaded",(function(){return D})),a.d(r,"error",(function(){return U}));var n={};a.r(n),a.d(n,"getError",(function(){return B})),a.d(n,"isLoading",(function(){return R}));var o={};a.r(o),a.d(o,"FIND_ALL_CATEGORIES_COMPLETED",(function(){return K})),a.d(o,"FIND_PRODUCTS_COMPLETED",(function(){return J})),a.d(o,"CLEAR_PRODUCT_SEARCH",(function(){return Y})),a.d(o,"FIND_PRODUCT_BY_ID_COMPLETED",(function(){return $})),a.d(o,"CLEAR_PRODUCT",(function(){return X}));var c={};a.r(c),a.d(c,"getCategories",(function(){return ee})),a.d(c,"getCategoryName",(function(){return te})),a.d(c,"getProductSearch",(function(){return ae})),a.d(c,"getProduct",(function(){return re}));var s={};a.r(s),a.d(s,"login",(function(){return pe})),a.d(s,"tryLoginFromServiceToken",(function(){return fe})),a.d(s,"signUp",(function(){return he})),a.d(s,"logout",(function(){return ge})),a.d(s,"updateProfile",(function(){return be})),a.d(s,"changePassword",(function(){return ve}));var l={};a.r(l),a.d(l,"findAllCategories",(function(){return Ee})),a.d(l,"findProducts",(function(){return je})),a.d(l,"findByProductId",(function(){return Ne}));var i={};a.r(i),a.d(i,"addToShoppingCart",(function(){return ye})),a.d(i,"updateShoppingCartItemQuantity",(function(){return we})),a.d(i,"removeShoppingCartItem",(function(){return Ce})),a.d(i,"buy",(function(){return ke})),a.d(i,"findOrders",(function(){return Pe})),a.d(i,"findOrder",(function(){return Oe}));var d={};a.r(d),a.d(d,"findAllCategories",(function(){return Ie})),a.d(d,"findProducts",(function(){return Fe})),a.d(d,"previousFindProductsResultPage",(function(){return xe})),a.d(d,"nextFindProductsResultPage",(function(){return De})),a.d(d,"findProductById",(function(){return Te})),a.d(d,"clearProduct",(function(){return qe}));var u={};a.r(u),a.d(u,"SIGN_UP_COMPLETED",(function(){return rt})),a.d(u,"LOGIN_COMPLETED",(function(){return nt})),a.d(u,"LOGOUT",(function(){return ot})),a.d(u,"UPDATE_PROFILE_COMPLETED",(function(){return ct}));var m={};a.r(m),a.d(m,"signUp",(function(){return st})),a.d(m,"login",(function(){return it})),a.d(m,"tryLoginFromServiceToken",(function(){return dt})),a.d(m,"logout",(function(){return ut})),a.d(m,"updateProfileCompleted",(function(){return mt})),a.d(m,"updateProfile",(function(){return pt})),a.d(m,"changePassword",(function(){return ft}));var p={};a.r(p),a.d(p,"getUser",(function(){return bt})),a.d(p,"isLoggedIn",(function(){return vt})),a.d(p,"getUserName",(function(){return Et}));var f={};a.r(f),a.d(f,"addToShoppingCart",(function(){return Rt})),a.d(f,"updateShoppingCartItemQuantity",(function(){return _t})),a.d(f,"removeShoppingCartItem",(function(){return Mt})),a.d(f,"buy",(function(){return Gt})),a.d(f,"findOrders",(function(){return Qt})),a.d(f,"previousFindOrdersResultPage",(function(){return Vt})),a.d(f,"nextFindOrdersResultPage",(function(){return Ht})),a.d(f,"clearOrder",(function(){return Wt})),a.d(f,"findOrder",(function(){return zt}));var h={};a.r(h),a.d(h,"getShoppingCart",(function(){return ea})),a.d(h,"getLastOrderId",(function(){return ta})),a.d(h,"getOrderSearch",(function(){return aa})),a.d(h,"getOrder",(function(){return ra}));var g=a(0),b=a.n(g),v=a(33),E=a.n(v),j=a(2),N=a(43),y=(a(89),a(90),a(93),a(94),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(95),a(119),a(120);var C,k,P=a(11),O=a(73),S=(a(121),"project/common/loading"),I="project/common/loaded",F="project/common/error",x=function(){return{type:S}},D=function(){return{type:I}},U=function(e){return{type:F,error:e}},T=null,q=!1,A=Object(P.c)({error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return t.error;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return!0;case I:case F:return!1;default:return e}}}),L=function(e){return e.app},B=function(e){return L(e).error},R=function(e){return L(e).loading},_=a(4),M=a(5),G=a(7),Q=a(6),V=a(8),H=a(10),W=a(71),z=a(45),K="project/catalog/findAllCategoriesCompleted",J="project/catalog/findProductsCompleted",Y="project/catalog/clearProductSearch",$="project/catalog/findProductByIdCompleted",X="project/catalog/clearProduct",Z=function(e){return e.catalog},ee=function(e){return Z(e).categories},te=function(e,t){if(!e)return"";var a=e.find((function(e){return e.id===t}));return a?a.name:""},ae=function(e){return Z(e).productSearch},re=function(e){return Z(e).product},ne=function e(){Object(_.a)(this,e),this.messsage="Network error"},oe=function(e){var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")},ce=function(e,t,a){if(!function(e,t){return!!e.ok&&(!t||(204===e.status?(t(),!0):(oe(e)&&e.json().then((function(e){return t(e)})),!0)))}(e,t)&&!function(e,t){if(e.status<400||e.status>=500)return!1;if(401===e.status&&k)return k(),!0;if(!oe(e))throw new ne;return t&&e.json().then((function(e){(e.globalError||e.fieldErrors)&&t(e)})),!0}(e,a))throw new ne},se=function(e){return k=e},le=function(e){return sessionStorage.setItem("serviceToken",e)},ie=function(){return sessionStorage.getItem("serviceToken")},de=function(){return sessionStorage.removeItem("serviceToken")},ue=function(e,t){var a={};a.method=e,t&&(t instanceof FormData?a.body=t:(a.headers={"Content-Type":"application/json"},a.body=JSON.stringify(t)));var r=ie();return r&&(a.headers?a.headers.Authorization="Bearer ".concat(r):a.headers={Authorization:"Bearer ".concat(r)}),a},me=function(e,t,a,r){return fetch("".concat("http://localhost:8080").concat(e),t).then((function(e){return ce(e,a,r)})).catch(C)},pe=function(e,t,a,r,n){return me("/users/login",ue("POST",{userName:e,password:t}),(function(e){le(e.serviceToken),se(n),a(e)}),r)},fe=function(e,t){ie()?(se(t),me("/users/loginFromServiceToken",ue("POST"),(function(t){return e(t)}),(function(){return de()}))):e()},he=function(e,t,a,r){me("/users/signUp",ue("POST",e),(function(e){le(e.serviceToken),se(r),t(e)}),a)},ge=function(){return de()},be=function(e,t,a){return me("/users/".concat(e.id),ue("PUT",e),t,a)},ve=function(e,t,a,r,n){return me("/users/".concat(e,"/changePassword"),ue("POST",{oldPassword:t,newPassword:a}),r,n)},Ee=function(e){return me("/catalog/categories",ue("GET"),e)},je=function(e,t){var a=e.categoryId,r=e.keywords,n=e.page,o="/catalog/products?page=".concat(n);o+=a?"&categoryId=".concat(a):"",o+=r.length>0?"&keywords=".concat(r):"",me(o,ue("GET"),t)},Ne=function(e,t){return me("/catalog/products/".concat(e),ue("GET"),t)},ye=function(e,t,a,r,n){return me("/shopping/shoppingcarts/".concat(e,"/addToShoppingCart"),ue("POST",{productId:t,quantity:a}),r,n)},we=function(e,t,a,r,n){return me("/shopping/shoppingcarts/".concat(e,"/updateShoppingCartItemQuantity"),ue("POST",{productId:t,quantity:a}),r,n)},Ce=function(e,t,a,r){return me("/shopping/shoppingcarts/".concat(e,"/removeShoppingCartItem"),ue("POST",{productId:t}),a,r)},ke=function(e,t,a,r,n){return me("/shopping/shoppingcarts/".concat(e,"/buy"),ue("POST",{postalAddress:t,postalCode:a}),r,n)},Pe=function(e,t){var a=e.page;return me("/shopping/orders?page=".concat(a),ue("GET"),t)},Oe=function(e,t){return me("/shopping/orders/".concat(e),ue("GET"),t)},Se={init:function(e){return C=e},userService:s,catalogService:l,shoppingService:i},Ie=function(){return function(e,t){ee(t())||Se.catalogService.findAllCategories((function(t){return e(function(e){return{type:K,categories:e}}(t))}))}},Fe=function(e){return function(t){t(Ue()),Se.catalogService.findProducts(e,(function(a){return t({type:J,productSearch:{criteria:e,result:a}})}))}},xe=function(e){return Fe(Object(z.a)({},e,{page:e.page-1}))},De=function(e){return Fe(Object(z.a)({},e,{page:e.page+1}))},Ue=function(){return{type:Y}},Te=function(e){return function(t){Se.catalogService.findByProductId(e,(function(e){return t(function(e){return{type:$,product:e}}(e))}))}},qe=function(){return{type:X}},Ae=null,Le=null,Be=null,Re=Object(P.c)({categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return t.categories;default:return e}},productSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return t.productSearch;case Y:return Le;default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return t.product;case X:return Be;default:return e}}}),_e=a(22),Me=a(75),Ge=Object(j.b)((function(e){return{categories:ee(e)}}))((function(e){var t=e.categories,a=(e.dispatch,Object(Me.a)(e,["categories","dispatch"]));return b.a.createElement("select",a,b.a.createElement(W.a,{id:"project.catalog.CategorySelector.allDepartments"},(function(e){return b.a.createElement("option",{value:""},e)})),t&&t.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.name)})))})),Qe={categoryId:"",keywords:""},Ve=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state=Qe,a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleCategoryIdChange",value:function(e){this.setState({categoryId:e.target.value})}},{key:"handleKeywordsChange",value:function(e){this.setState({keywords:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.dispatch(Fe({categoryId:this.toNumber(this.state.categoryId),keywords:this.state.keywords.trim(),page:0})),this.props.history.push("/catalog/find-products-result")}},{key:"toNumber",value:function(e){return e.length>0?Number(e):null}},{key:"render",value:function(){var e=this;return b.a.createElement("form",{className:"form-inline mt-2 mt-md-0",onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement(Ge,{id:"categoryId",className:"custom-select my-1 mr-sm-2",value:this.state.categoryId,onChange:function(t){return e.handleCategoryIdChange(t)}}),b.a.createElement("input",{id:"keywords",type:"text",className:"form-control mr-sm-2",value:this.state.keywords,onChange:function(t){return e.handleKeywordsChange(t)}}),b.a.createElement("button",{type:"submit",className:"btn btn-primary my-2 my-sm-0"},b.a.createElement(W.a,{id:"project.global.buttons.search"})))}}]),t}(b.a.Component),He=Object(_e.f)(Object(j.b)()(Ve)),We=a(15),ze=Object(We.c)((function(e){var t=e.error,a=e.onClose,r=e.intl;if(null==t)return null;var n=t instanceof ne?r.formatMessage({id:"project.global.exceptions.NetworkError"}):t.message;return b.a.createElement("div",{className:"modal",style:{display:"block"},tabIndex:"-1",role:"dialog"},b.a.createElement("div",{className:"modal-dialog",role:"document"},b.a.createElement("div",{className:"modal-content"},b.a.createElement("div",{className:"modal-header"},b.a.createElement("h5",{className:"modal-title"},b.a.createElement(W.a,{id:"project.common.ErrorDialog.title"}))),b.a.createElement("div",{className:"modal-body"},b.a.createElement("p",null,n)),b.a.createElement("div",{className:"modal-footer"},b.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:a},b.a.createElement(W.a,{id:"project.global.buttons.close"}))))))})),Ke=Object(We.c)((function(e){var t,a,r=e.errors,n=e.onClose,o=e.intl;return r?(r.globalError?t=r.globalError:r.fieldErrors&&(a=[],r.fieldErrors.forEach((function(e){var t=o.formatMessage({id:"project.global.fields.".concat(e.fieldName)});a.push("".concat(t,": ").concat(e.message))}))),b.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert"},t||"",a?b.a.createElement("ul",null,a.map((function(e,t){return b.a.createElement("li",{key:t},e)}))):"",b.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(){return n()}},b.a.createElement("span",{"aria-hidden":"true"},"\xd7")))):null})),Je=(a(123),function(e){return e.loading&&b.a.createElement("div",{id:"floatingCirclesG"},b.a.createElement("div",{className:"f_circleG",id:"frotateG_01"}),b.a.createElement("div",{className:"f_circleG",id:"frotateG_02"}),b.a.createElement("div",{className:"f_circleG",id:"frotateG_03"}),b.a.createElement("div",{className:"f_circleG",id:"frotateG_04"}),b.a.createElement("div",{className:"f_circleG",id:"frotateG_05"}),b.a.createElement("div",{className:"f_circleG",id:"frotateG_07"}),b.a.createElement("div",{className:"f_circleG",id:"frotateG_08"}))}),Ye=function(e){var t=e.back,a=e.next;return b.a.createElement("nav",{"aria-label":"page navigation"},b.a.createElement("ul",{className:"pagination justify-content-center"},b.a.createElement("li",{className:"page-item ".concat(t.enabled?"":"disabled")},b.a.createElement("button",{className:"page-link",onClick:t.onClick},b.a.createElement(W.a,{id:"project.global.buttons.back"}))),b.a.createElement("li",{className:"page-item ".concat(a.enabled?"":"disabled")},b.a.createElement("button",{className:"page-link",onClick:a.onClick},b.a.createElement(W.a,{id:"project.global.buttons.next"})))))},$e=function(e){var t=e.id,a=e.name;return b.a.createElement(H.b,{to:"/catalog/product-details/".concat(t)},a)},Xe=Object(_e.f)((function(e){var t=e.history;return t.length>2&&b.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return t.goBack()}},b.a.createElement(W.a,{id:"project.global.buttons.back"}))})),Ze=function(e){var t=e.products,a=e.categories;return b.a.createElement("table",{className:"table table-striped table-hover"},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",{scope:"col"},b.a.createElement(W.a,{id:"project.global.fields.department"})),b.a.createElement("th",{scope:"col"},b.a.createElement(W.a,{id:"project.global.fields.name"})))),b.a.createElement("tbody",null,t.map((function(e){return b.a.createElement("tr",{key:e.id},b.a.createElement("td",null,te(a,e.categoryId)),b.a.createElement("td",null,b.a.createElement($e,{id:e.id,name:e.name})))}))))},et={previousFindProductsResultPage:xe,nextFindProductsResultPage:De},tt=Object(j.b)((function(e){return{productSearch:ae(e),categories:ee(e)}}),et)((function(e){var t=e.productSearch,a=e.categories,r=e.previousFindProductsResultPage,n=e.nextFindProductsResultPage;return t?0===t.result.items.length?b.a.createElement("div",{className:"alert alert-danger",role:"alert"},b.a.createElement(W.a,{id:"project.catalog.FindProductsResult.noProductsFound"})):b.a.createElement("div",null,b.a.createElement(Ze,{products:t.result.items,categories:a}),b.a.createElement(Ye,{back:{enabled:t.criteria.page>=1,onClick:function(){return r(t.criteria)}},next:{enabled:t.result.existMoreItems,onClick:function(){return n(t.criteria)}}})):null})),at=a(3),rt="project/users/signUpCompleted",nt="project/users/loginCompleted",ot="project/users/logout",ct="project/users/updateProfileCompleted",st=function(e,t,a,r){return function(n){return Se.userService.signUp(e,(function(e){n(function(e){return{type:rt,authenticatedUser:e}}(e)),t()}),a,r)}},lt=function(e){return{type:nt,authenticatedUser:e}},it=function(e,t,a,r,n){return function(o){return Se.userService.login(e,t,(function(e){o(lt(e)),a()}),r,n)}},dt=function(e){return function(t){return Se.userService.tryLoginFromServiceToken((function(e){e&&t(lt(e))}),e)}},ut=function(){return Se.userService.logout(),{type:ot}},mt=function(e){return{type:ct,user:e}},pt=function(e,t,a){return function(r){return Se.userService.updateProfile(e,(function(e){r(mt(e)),t()}),a)}},ft=function(e,t,a,r,n){return function(o){return Se.userService.changePassword(e,t,a,r,n)}},ht=null,gt=Object(P.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:case nt:return t.authenticatedUser.user;case ot:return ht;case ct:return t.user;default:return e}}}),bt=function(e){return function(e){return e.users}(e).user},vt=function(e){return null!==bt(e)},Et=function(e){return vt(e)?bt(e).userName:null},jt={userName:"",password:"",backendErrors:null},Nt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state=jt,a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleUserNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.form.checkValidity()?this.login():(this.setBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"login",value:function(){var e,t,a=this;this.props.dispatch(it(this.state.userName.trim(),this.state.password,(function(){return a.props.history.push("/")}),(function(e){return a.setBackendErrors(e)}),(e=this.props.dispatch,t=this.props.history,function(){t.push("/users/login"),e(ut())})))}},{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,b.a.createElement("p",{className:"text-center"},b.a.createElement(H.b,{to:"/users/signup"},b.a.createElement(W.a,{id:"project.users.SignUp.title"}))),b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("div",{className:"card bg-light border-dark"},b.a.createElement("h5",{className:"card-header"},b.a.createElement(W.a,{id:"project.users.Login.title"})),b.a.createElement("div",{className:"card-body"},b.a.createElement("form",{ref:function(t){return e.form=t},className:"needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"userName",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.userName"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"userName",className:"form-control",value:this.state.userName,onChange:function(t){return e.handleUserNameChange(t)},autoFocus:!0,required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"password",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.password"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"password",id:"password",className:"form-control",value:this.state.password,onChange:function(t){return e.handlePasswordChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("div",{className:"offset-md-3 col-md-1"},b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.users.Login.title"}))))))))}}]),t}(b.a.Component),yt=Object(j.b)()(Nt),wt={userName:"",password:"",confirmPassword:"",firstName:"",lastName:"",email:"",backendErrors:null,passwordsDoNotMatch:!1},Ct=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state=wt,a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleUserNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleConfirmPasswordChange",value:function(e){this.confirmPasswordInput.setCustomValidity(""),this.setState({confirmPassword:e.target.value,passwordsDoNotMatch:!1})}},{key:"handleFirstNameChange",value:function(e){this.setState({firstName:e.target.value})}},{key:"handleLastNameChange",value:function(e){this.setState({lastName:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.form.checkValidity()&&this.checkConfirmPassword()?this.signUp():(this.setBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"checkConfirmPassword",value:function(){return this.state.password===this.state.confirmPassword||(this.confirmPasswordInput.setCustomValidity("error"),this.setState({passwordsDoNotMatch:!0}),!1)}},{key:"signUp",value:function(){var e,t,a=this;this.props.dispatch(st({userName:this.state.userName.trim(),password:this.state.password,firstName:this.state.firstName.trim(),lastName:this.state.lastName.trim(),email:this.state.email.trim()},(function(){return a.props.history.push("/")}),(function(e){return a.setBackendErrors(e)}),(e=this.props.dispatch,t=this.props.history,function(){t.push("/users/login"),e(ut())})))}},{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("div",{className:"card bg-light border-dark"},b.a.createElement("h5",{className:"card-header"},b.a.createElement(W.a,{id:"project.users.SignUp.title"})),b.a.createElement("div",{className:"card-body"},b.a.createElement("form",{ref:function(t){return e.form=t},className:"needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"userName",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.userName"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"userName",className:"form-control",value:this.state.userName,onChange:function(t){return e.handleUserNameChange(t)},autoFocus:!0,required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"password",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.password"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"password",id:"password",className:"form-control",value:this.state.password,onChange:function(t){return e.handlePasswordChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"confirmPassword",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.users.SignUp.fields.confirmPassword"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{ref:function(t){return e.confirmPasswordInput=t},type:"password",id:"confirmPassword",className:"form-control",value:this.state.confirmPassword,onChange:function(t){return e.handleConfirmPasswordChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},this.state.passwordsDoNotMatch?b.a.createElement(W.a,{id:"project.global.validator.passwordsDoNotMatch"}):b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"firstName",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.firstName"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"firstName",className:"form-control",value:this.state.firstName,onChange:function(t){return e.handleFirstNameChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"lastName",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.lastName"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"lastName",className:"form-control",value:this.state.lastName,onChange:function(t){return e.handleLastNameChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"email",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.email"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"email",id:"email",className:"form-control",value:this.state.email,onChange:function(t){return e.handleEmailChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.email"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("div",{className:"offset-md-3 col-md-2"},b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.users.SignUp.title"}))))))))}}]),t}(b.a.Component),kt=Object(j.b)()(Ct),Pt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state={firstName:e.user.firstName,lastName:e.user.lastName,email:e.user.email,backendErrors:null,passwordsDoNotMatch:!1},a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleFirstNameChange",value:function(e){this.setState({firstName:e.target.value})}},{key:"handleLastNameChange",value:function(e){this.setState({lastName:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.form.checkValidity()?this.updateProfile():(this.setBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"updateProfile",value:function(){var e=this;this.props.updateProfile({id:this.props.user.id,firstName:this.state.firstName.trim(),lastName:this.state.lastName.trim(),email:this.state.email.trim()},(function(){return e.props.history.push("/")}),(function(t){return e.setBackendErrors(t)}))}},{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("div",{className:"card bg-light border-dark"},b.a.createElement("h5",{className:"card-header"},b.a.createElement(W.a,{id:"project.users.UpdateProfile.title"})),b.a.createElement("div",{className:"card-body"},b.a.createElement("form",{ref:function(t){return e.form=t},className:"needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"firstName",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.firstName"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"firstName",className:"form-control",value:this.state.firstName,onChange:function(t){return e.handleFirstNameChange(t)},autoFocus:!0,required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"lastName",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.lastName"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"lastName",className:"form-control",value:this.state.lastName,onChange:function(t){return e.handleLastNameChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"email",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.email"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"email",id:"email",className:"form-control",value:this.state.email,onChange:function(t){return e.handleEmailChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.email"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("div",{className:"offset-md-3 col-md-1"},b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.global.buttons.save"}))))))))}}]),t}(b.a.Component),Ot={updateProfile:pt},St=Object(j.b)((function(e){return{user:bt(e)}}),Ot)(Pt),It={oldPassword:"",newPassword:"",confirmNewPassword:"",backendNewErrors:null,passwordsDoNotMatch:!1},Ft=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state=It,a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleOldPasswordChange",value:function(e){this.setState({oldPassword:e.target.value})}},{key:"handleNewPasswordChange",value:function(e){this.setState({newPassword:e.target.value})}},{key:"handleConfirmNewPasswordChange",value:function(e){this.confirmNewPasswordInput.setCustomValidity(""),this.setState({confirmNewPassword:e.target.value,passwordsDoNotMatch:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.form.checkValidity()&&this.checkConfirmNewPassword()?this.changePasword():(this.setBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"checkConfirmNewPassword",value:function(){return this.state.newPassword===this.state.confirmNewPassword||(this.confirmNewPasswordInput.setCustomValidity("error"),this.setState({passwordsDoNotMatch:!0}),!1)}},{key:"changePasword",value:function(){var e=this;this.props.changePassword(this.props.id,this.state.oldPassword,this.state.newPassword,(function(){return e.props.history.push("/")}),(function(t){return e.setBackendErrors(t)}))}},{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("div",{className:"card bg-light border-dark"},b.a.createElement("h5",{className:"card-header"},b.a.createElement(W.a,{id:"project.users.ChangePassword.title"})),b.a.createElement("div",{className:"card-body"},b.a.createElement("form",{ref:function(t){return e.form=t},className:"needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"oldPassword",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.users.ChangePassword.fields.oldPassword"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"password",id:"oldPassword",className:"form-control",value:this.state.password,onChange:function(t){return e.handleOldPasswordChange(t)},autoFocus:!0,required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"newPassword",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.users.ChangePassword.fields.newPassword"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"password",id:"newPassword",className:"form-control",value:this.state.password,onChange:function(t){return e.handleNewPasswordChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"confirmNewPassword",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.users.ChangePassword.fields.confirmNewPassword"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{ref:function(t){return e.confirmNewPasswordInput=t},type:"password",id:"confirmNewPassword",className:"form-control",value:this.state.confirmPassword,onChange:function(t){return e.handleConfirmNewPasswordChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},this.state.passwordsDoNotMatch?b.a.createElement(W.a,{id:"project.global.validator.passwordsDoNotMatch"}):b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("div",{className:"offset-md-3 col-md-1"},b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.global.buttons.save"}))))))))}}]),t}(b.a.Component),xt={changePassword:ft},Dt=Object(j.b)((function(e){return{id:bt(e).id}}),xt)(Ft),Ut=function(e){function t(){return Object(_.a)(this,t),Object(G.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(qt.actions.logout()),this.props.history.push("/")}},{key:"render",value:function(){return null}}]),t}(b.a.Component),Tt=Object(j.b)()(Ut),qt={actions:m,actionTypes:u,reducer:gt,selectors:p},At="project/shopping/buyCompleted",Lt="project/shopping/clearOrder",Bt=function(e){return{type:"project/shopping/shoppingCartUpdated",shoppingCart:e}},Rt=function(e,t,a,r,n){return function(o){return Se.shoppingService.addToShoppingCart(e,t,a,(function(e){o(Bt(e)),r()}),n)}},_t=function(e,t,a,r,n){return function(o){return Se.shoppingService.updateShoppingCartItemQuantity(e,t,a,(function(e){o(Bt(e)),r()}),n)}},Mt=function(e,t,a,r){return function(n){return Se.shoppingService.removeShoppingCartItem(e,t,(function(e){n(Bt(e)),a()}),r)}},Gt=function(e,t,a,r,n){return function(o){return Se.shoppingService.buy(e,t,a,(function(e){var t=e.id;o({type:At,orderId:t}),r()}),n)}},Qt=function(e){return function(t){t({type:"project/shopping/clearOrderSearch"}),Se.shoppingService.findOrders(e,(function(a){return t({type:"project/shopping/findOrdersCompleted",orderSearch:{criteria:e,result:a}})}))}},Vt=function(e){return Qt({page:e.page-1})},Ht=function(e){return Qt({page:e.page+1})},Wt=function(){return{type:Lt}},zt=function(e){return function(t){Se.shoppingService.findOrder(e,(function(e){t(function(e){return{type:"project/shopping/findOrderCompleted",order:e}}(e))}))}},Kt=null,Jt=null,Yt=null,$t=null,Xt=Object(P.c)({shoppingCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt.actionTypes.LOGIN_COMPLETED:case qt.actionTypes.SIGN_UP_COMPLETED:return t.authenticatedUser.shoppingCart;case"project/shopping/shoppingCartUpdated":return t.shoppingCart;case At:return{id:e.id,items:[],totalPrice:0,totalQuantity:0};default:return e}},lastOrderId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return t.orderId;default:return e}},orderSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"project/shopping/findOrdersCompleted":return t.orderSearch;case"project/shopping/clearOrderSearch":return Yt;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"project/shopping/findOrderCompleted":return t.order;case Lt:return $t;default:return e}}}),Zt=function(e){return e.shopping},ea=function(e){return Zt(e).shoppingCart},ta=function(e){return Zt(e).lastOrderId},aa=function(e){return Zt(e).orderSearch},ra=function(e){return Zt(e).order},na=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state={quantity:1,backendErrors:null},a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleQuantityChange",value:function(e){this.setState({quantity:Number(e.target.value)})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.form.checkValidity()?this.props.addToShoppingCart(this.props.shoppingCartId,this.props.productId,this.state.quantity,(function(){return t.props.history.push("/shopping/shopping-cart")}),(function(e){return t.setBackendErrors(e)})):(this.setBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("form",{ref:function(t){return e.form=t},className:"needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"quantity",className:"offset-md-5 col-md-1 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.quantity"})),b.a.createElement("div",{className:"col-md-2"},b.a.createElement("input",{type:"number",id:"quantity",className:"form-control",value:this.state.quantity,onChange:function(t){return e.handleQuantityChange(t)},autoFocus:!0,min:"1"}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.incorrectQuantity"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("div",{className:"offset-md-6 col-md-2"},b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.shopping.AddToCart.add"}))))))}}]),t}(b.a.Component),oa={addToShoppingCart:Rt},ca=na=Object(j.b)((function(e){return{shoppingCartId:ea(e).id}}),oa)(na),sa=function(e){var t=e.totalQuantity;return b.a.createElement("div",null,b.a.createElement("span",{className:"fas fa-shopping-cart"}),"\xa0 (",t,")")},la=sa=Object(j.b)((function(e){return{totalQuantity:ea(e).totalQuantity}}))(sa),ia=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state={quantity:e.item.quantity},a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handleQuantityChange",value:function(e){this.setState({quantity:Number(e.target.value)})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.form.checkValidity()?this.handleUpdateQuantity():(this.props.onBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"handleRemoveItem",value:function(){var e=this;this.props.onRemoveItem(this.props.shoppingItemListId,this.props.item.productId,(function(){e.props.onBackendErrors(null)}),(function(t){e.props.onBackendErrors(t)}))}},{key:"handleUpdateQuantity",value:function(){var e=this;this.props.onUpdateQuantity(this.props.shoppingItemListId,this.props.item.productId,this.state.quantity,(function(){e.setState({quantity:e.props.item.quantity}),e.props.onBackendErrors(null)}),(function(t){e.setState({quantity:e.props.item.quantity}),e.props.onBackendErrors(t)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.item,r=t.edit;return b.a.createElement("tr",null,b.a.createElement("td",null,r&&b.a.createElement("span",null,b.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return e.handleRemoveItem()}},b.a.createElement("span",{className:"fas fa-trash-alt"})),"\xa0 \xa0"),b.a.createElement($e,{id:a.productId,name:a.productName})),b.a.createElement("td",null,b.a.createElement(at.b,{value:a.productPrice}),"\u20ac"),r&&b.a.createElement("td",null,b.a.createElement("form",{ref:function(t){return e.form=t},className:"form-inline needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("input",{type:"number",className:"form-control mr-2",style:{width:"50%"},value:this.state.quantity,onChange:function(t){return e.handleQuantityChange(t)},min:"1"}),b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.global.buttons.save"})),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.incorrectQuantity"})))),!r&&b.a.createElement("td",null,a.quantity))}}]),t}(b.a.Component),da={backendErrors:null},ua=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state=da,a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,r=t.edit,n=t.onUpdateQuantity,o=t.onRemoveItem;return 0===a.items.length?b.a.createElement("div",{className:"alert alert-info",role:"alert"},b.a.createElement(W.a,{id:"project.shopping.ShoppingCart.empty"})):b.a.createElement("div",null,b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("table",{className:"table"},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",{scope:"col",style:{width:"60%"}}),b.a.createElement("th",{scope:"col",style:{width:"20%"}},b.a.createElement(W.a,{id:"project.global.fields.price"})),b.a.createElement("th",{scope:"col",style:{width:"20%"}},b.a.createElement(W.a,{id:"project.global.fields.quantity"})))),b.a.createElement("tbody",null,a.items.map((function(t){return b.a.createElement(ia,{shoppingItemListId:a.id,key:t.productId,item:t,edit:r,onUpdateQuantity:n,onRemoveItem:o,onBackendErrors:function(t){return e.setBackendErrors(t)}})})))),b.a.createElement("p",{className:"text-center font-weight-bold"},b.a.createElement(W.a,{id:"project.global.fields.totalPrice"}),": ",b.a.createElement(at.b,{value:a.totalPrice}),"\u20ac"))}}]),t}(b.a.Component),ma={onUpdateQuantity:_t,onRemoveItem:Mt},pa=Object(j.b)((function(e){return{cart:ea(e)}}),ma)((function(e){var t=e.cart,a=e.history,r=e.onUpdateQuantity,n=e.onRemoveItem;return b.a.createElement("div",null,b.a.createElement(ua,{list:t,edit:!0,onUpdateQuantity:r,onRemoveItem:n}),t.items.length>0&&b.a.createElement("div",{className:"text-center"},b.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return a.push("/shopping/buy")}},b.a.createElement(W.a,{id:"project.global.buttons.buy"}))))})),fa={postalAddress:"",postalCode:"",backendErrors:null},ha=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(G.a)(this,Object(Q.a)(t).call(this,e))).state=fa,a}return Object(V.a)(t,e),Object(M.a)(t,[{key:"handlePostalAddressChange",value:function(e){this.setState({postalAddress:e.target.value})}},{key:"handlePostalCodeChange",value:function(e){this.setState({postalCode:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.form.checkValidity()?this.buy():(this.setBackendErrors(null),this.form.classList.add("was-validated"))}},{key:"buy",value:function(){var e=this;this.props.buy(this.props.shoppingCartId,this.state.postalAddress.trim(),this.state.postalCode.trim(),(function(){return e.props.history.push("/shopping/purchase-completed")}),(function(t){return e.setBackendErrors(t)}))}},{key:"setBackendErrors",value:function(e){this.setState({backendErrors:e})}},{key:"handleErrorsClose",value:function(){this.setState({backendErrors:null})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,b.a.createElement(Ke,{errors:this.state.backendErrors,onClose:function(){return e.handleErrorsClose()}}),b.a.createElement("div",{className:"card bg-light border-dark"},b.a.createElement("h5",{className:"card-header"},b.a.createElement(W.a,{id:"project.shopping.BuyForm.title"})),b.a.createElement("div",{className:"card-body"},b.a.createElement("form",{ref:function(t){return e.form=t},className:"needs-validation",noValidate:!0,onSubmit:function(t){return e.handleSubmit(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"postalAddress",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.postalAddress"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"postalAddress",className:"form-control",value:this.state.postalAddress,onChange:function(t){return e.handlePostalAddressChange(t)},autoFocus:!0,required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"postalCode",className:"col-md-3 col-form-label"},b.a.createElement(W.a,{id:"project.global.fields.postalCode"})),b.a.createElement("div",{className:"col-md-4"},b.a.createElement("input",{type:"text",id:"postalCode",className:"form-control",value:this.state.postalCode,onChange:function(t){return e.handlePostalCodeChange(t)},required:!0}),b.a.createElement("div",{className:"invalid-feedback"},b.a.createElement(W.a,{id:"project.global.validator.required"})))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("div",{className:"offset-md-3 col-md-1"},b.a.createElement("button",{type:"submit",className:"btn btn-primary"},b.a.createElement(W.a,{id:"project.global.buttons.buy"}))))))))}}]),t}(b.a.Component),ga={buy:Gt},ba=ha=Object(j.b)((function(e){return{shoppingCartId:ea(e).id}}),ga)(ha),va=Object(j.b)((function(e){return{cart:ea(e)}}))((function(e){var t=e.cart,a=e.history;return t.items.length>0&&b.a.createElement("div",null,b.a.createElement(ba,{history:a}),b.a.createElement(ua,{list:t}))})),Ea=function(e){var t=e.id;return b.a.createElement(H.b,{to:"/shopping/order-details/".concat(t)},t)},ja=Object(j.b)((function(e){return{orderId:ta(e)}}))((function(e){var t=e.orderId;return t&&b.a.createElement("div",{className:"alert alert-success",role:"alert"},b.a.createElement(W.a,{id:"project.shopping.PurchaseCompleted.purchaseOrderGenerated"}),": \xa0",b.a.createElement(Ea,{id:t}))})),Na=function(e){function t(){return Object(_.a)(this,t),Object(G.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Qt({page:0})),this.props.history.push("/shopping/find-orders-result")}},{key:"render",value:function(){return null}}]),t}(b.a.Component),ya=Object(j.b)()(Na),wa=function(e){var t=e.orders;return b.a.createElement("table",{className:"table table-striped table-hover"},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",{scope:"col"},b.a.createElement(W.a,{id:"project.global.fields.purchaseOrder"})),b.a.createElement("th",{scope:"col"},b.a.createElement(W.a,{id:"project.global.fields.date"})))),b.a.createElement("tbody",null,t.map((function(e){return b.a.createElement("tr",{key:e.id},b.a.createElement("td",null,b.a.createElement(Ea,{id:e.id})),b.a.createElement("td",null,b.a.createElement(at.a,{value:new Date(e.date)})," - ",b.a.createElement(at.c,{value:new Date(e.date)})))}))))},Ca={findOrders:Qt,previousFindOrdersResultPage:Vt,nextFindOrdersResultPage:Ht},ka=Object(j.b)((function(e){return{orderSearch:aa(e)}}),Ca)((function(e){var t=e.orderSearch,a=e.previousFindOrdersResultPage,r=e.nextFindOrdersResultPage;return t?0===t.result.items.length?b.a.createElement("div",{className:"alert alert-info",role:"alert"},b.a.createElement(W.a,{id:"project.shopping.FindOrdersResult.noOrders"})):b.a.createElement("div",null,b.a.createElement(wa,{orders:t.result.items}),b.a.createElement(Ye,{back:{enabled:t.criteria.page>=1,onClick:function(){return a(t.criteria)}},next:{enabled:t.result.existMoreItems,onClick:function(){return r(t.criteria)}}})):null})),Pa=function(e){function t(){return Object(_.a)(this,t),Object(G.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=Number(this.props.match.params.id);Number.isNaN(e)||this.props.findOrder(e)}},{key:"componentWillUnmount",value:function(){this.props.clearOrder()}},{key:"render",value:function(){var e=this.props.order;return e?b.a.createElement("div",null,b.a.createElement(Xe,null),b.a.createElement("div",{className:"card text-center"},b.a.createElement("div",{className:"card-body"},b.a.createElement("h5",{className:"card-title"},b.a.createElement(W.a,{id:"project.global.fields.purchaseOrder"})," ",e.id),b.a.createElement("h6",{className:"card-subtitle text-muted"},b.a.createElement(at.a,{value:new Date(e.date)})," - ",b.a.createElement(at.c,{value:new Date(e.date)})),b.a.createElement("p",{className:"card-text"},e.postalAddress," - ",e.postalCode))),b.a.createElement(ua,{list:e})):null}}]),t}(b.a.Component),Oa={findOrder:zt,clearOrder:Wt},Sa=Object(j.b)((function(e){return{order:ra(e)}}),Oa)(Pa),Ia={actions:f,reducer:Xt,selectors:h},Fa=function(e){function t(){return Object(_.a)(this,t),Object(G.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=Number(this.props.match.params.id);Number.isNaN(e)||this.props.findProductById(e)}},{key:"componentWillUnmount",value:function(){this.props.clearProduct()}},{key:"render",value:function(){var e=this.props.product;return e?b.a.createElement("div",null,b.a.createElement(Xe,null),b.a.createElement("div",{className:"card text-center"},b.a.createElement("div",{className:"card-body"},b.a.createElement("h5",{className:"card-title"},e.name),b.a.createElement("h6",{className:"card-subtitle text-muted"},b.a.createElement(W.a,{id:"project.global.fields.department"}),":\xa0",te(this.props.categories,e.categoryId)),b.a.createElement("p",{className:"card-text"},e.description),b.a.createElement("p",{className:"card-text font-weight-bold"},b.a.createElement(W.a,{id:"project.global.fields.price"}),": ",b.a.createElement(at.b,{value:e.price}),"\u20ac"))),this.props.loggedIn&&b.a.createElement("div",null,b.a.createElement("br",null),b.a.createElement(ca,{productId:e.id,history:this.props.history}))):null}}]),t}(b.a.Component),xa={findProductById:Te,clearProduct:qe},Da=Object(j.b)((function(e){return{loggedIn:qt.selectors.isLoggedIn(e),product:re(e),categories:ee(e)}}),xa)(Fa),Ua={actions:d,actionTypes:o,reducer:Re,selectors:c},Ta=Object(j.b)((function(e){return{userName:qt.selectors.getUserName(e)}}))((function(e){var t=e.userName;return b.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border"},b.a.createElement(H.b,{className:"navbar-brand",to:"/"},"PA Shop"),b.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},b.a.createElement("span",{className:"navbar-toggler-icon"})),b.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},b.a.createElement("ul",{className:"navbar-nav mr-auto"},b.a.createElement("li",null,b.a.createElement(He,null))),t?b.a.createElement("ul",{className:"navbar-nav"},b.a.createElement("li",{className:"nav-item"},b.a.createElement(H.b,{className:"nav-link",to:"/shopping/shopping-cart"},b.a.createElement(la,null))),b.a.createElement("li",{className:"nav-item"},b.a.createElement(H.b,{className:"nav-link",to:"/shopping/find-orders"},b.a.createElement(W.a,{id:"project.shopping.header.orders"}))),b.a.createElement("li",{className:"nav-item dropdown"},b.a.createElement("a",{className:"dropdown-toggle nav-link",href:"/","data-toggle":"dropdown"},b.a.createElement("span",{className:"fas fa-user"}),"\xa0",t),b.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},b.a.createElement(H.b,{className:"dropdown-item",to:"/users/update-profile"},b.a.createElement(W.a,{id:"project.users.UpdateProfile.title"})),b.a.createElement(H.b,{className:"dropdown-item",to:"/users/change-password"},b.a.createElement(W.a,{id:"project.users.ChangePassword.title"})),b.a.createElement("div",{className:"dropdown-divider"}),b.a.createElement(H.b,{className:"dropdown-item",to:"/users/logout"},b.a.createElement(W.a,{id:"project.app.Header.logout"}))))):b.a.createElement("ul",{className:"navbar-nav"},b.a.createElement("li",{className:"nav-item"},b.a.createElement(H.b,{className:"nav-link",to:"/users/login"},b.a.createElement(W.a,{id:"project.users.Login.title"}))))))})),qa=Object(j.b)((function(e){return{error:B(e)}}),(function(e){return{onClose:function(){return e(U(null))}}}))(ze),Aa=Object(j.b)((function(e){return{loading:R(e)}}))(Je),La=function(){return b.a.createElement("div",null,b.a.createElement(qa,null),b.a.createElement(Aa,null))},Ba=function(){return b.a.createElement("div",{className:"text-center"},b.a.createElement(W.a,{id:"project.app.Home.welcome"}))},Ra=Object(_e.f)(Object(j.b)((function(e){return{loggedIn:qt.selectors.isLoggedIn(e)}}))((function(e){var t=e.loggedIn;return b.a.createElement("div",{className:"container"},b.a.createElement("br",null),b.a.createElement(La,null),b.a.createElement(_e.c,null,b.a.createElement(_e.a,{exact:!0,path:"/",component:Ba}),b.a.createElement(_e.a,{exact:!0,path:"/catalog/find-products-result",component:tt}),b.a.createElement(_e.a,{exact:!0,path:"/catalog/product-details/:id",component:Da}),t&&b.a.createElement(_e.a,{exact:!0,path:"/shopping/shopping-cart",component:pa}),t&&b.a.createElement(_e.a,{exact:!0,path:"/shopping/buy",component:va}),t&&b.a.createElement(_e.a,{exact:!0,path:"/shopping/purchase-completed",component:ja}),t&&b.a.createElement(_e.a,{exact:!0,path:"/shopping/find-orders",component:ya}),t&&b.a.createElement(_e.a,{exact:!0,path:"/shopping/find-orders-result",component:ka}),t&&b.a.createElement(_e.a,{exact:!0,path:"/shopping/order-details/:id",component:Sa}),t&&b.a.createElement(_e.a,{exact:!0,path:"/users/update-profile",component:St}),t&&b.a.createElement(_e.a,{exact:!0,path:"/users/change-password",component:Dt}),t&&b.a.createElement(_e.a,{exact:!0,path:"/users/logout",component:Tt}),!t&&b.a.createElement(_e.a,{exact:!0,path:"/users/login",component:yt}),!t&&b.a.createElement(_e.a,{exact:!0,path:"/users/signup",component:kt}),b.a.createElement(_e.a,{component:Ba})))}))),_a=function(){return b.a.createElement("div",null,b.a.createElement("br",null),b.a.createElement("hr",null),b.a.createElement("footer",null,b.a.createElement("p",{className:"text-center"},b.a.createElement(W.a,{id:"project.app.Footer.text"}))))},Ma=function(e){function t(){return Object(_.a)(this,t),Object(G.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.dispatch(qt.actions.tryLoginFromServiceToken((e=this.props.dispatch,function(){return e(qt.actions.logout())}))),this.props.dispatch(Ua.actions.findAllCategories())}},{key:"render",value:function(){return b.a.createElement("div",null,b.a.createElement(H.a,null,b.a.createElement("div",null,b.a.createElement(Ta,null),b.a.createElement(Ra,null))),b.a.createElement(_a,null))}}]),t}(b.a.Component),Ga=Object(j.b)()(Ma),Qa={actions:r,reducer:A,selectors:n},Va=Object(P.c)({app:Qa.reducer,users:qt.reducer,catalog:Ua.reducer,shopping:Ia.reducer}),Ha=function(){var e=[O.a];return Object(P.d)(Va,P.a.apply(void 0,e))},Wa={en:{"project.app.Footer.text":"PA Shop - Area of Telematics Engineering - University of A Coru\xf1a","project.app.Header.home":"Home","project.app.Header.logout":"Logout","project.shopping.header.orders":"Orders","project.app.Home.welcome":"Browse our catalog of products.","project.catalog.CategorySelector.allDepartments":"All departments","project.catalog.FindProductsResult.noProductsFound":"No products found","project.common.ErrorDialog.title":"Error","project.global.buttons.buy":"Buy","project.global.buttons.cancel":"Cancel","project.global.buttons.close":"Close","project.global.buttons.next":"Next","project.global.buttons.ok":"OK","project.global.buttons.back":"Back","project.global.buttons.save":"Save","project.global.buttons.search":"Search","project.global.exceptions.NetworkError":"Network error","project.global.fields.date":"Date","project.global.fields.department":"Department","project.global.fields.email":"Email address","project.global.fields.firstName":"First name","project.global.fields.purchaseOrder":"Purchase order","project.global.fields.lastName":"Last name","project.global.fields.name":"Name","project.global.fields.password":"Password","project.global.fields.postalAddress":"Postal address","project.global.fields.postalCode":"Postal code","project.global.fields.price":"Price","project.global.fields.quantity":"Quantity","project.global.fields.totalPrice":"Total price","project.global.fields.userName":"Username","project.global.validator.email":"Provide a correct e-mail address","project.global.validator.incorrectQuantity":"Incorrect quantity","project.global.validator.passwordsDoNotMatch":"Passwords do not match","project.global.validator.required":"Required field","project.shopping.AddToCart.add":"Add to cart","project.shopping.BuyForm.title":"Buy","project.shopping.FindOrdersResult.noOrders":"No orders found","project.shopping.PurchaseCompleted.purchaseOrderGenerated":"Purchase order generated","project.shopping.ShoppingCart.empty":"Cart is empty","project.users.ChangePassword.fields.confirmNewPassword":"Confirm new password","project.users.ChangePassword.fields.newPassword":"New password","project.users.ChangePassword.fields.oldPassword":"Old password","project.users.ChangePassword.title":"Change password","project.users.Login.title":"Login","project.users.SignUp.fields.confirmPassword":"Confirm password","project.users.SignUp.title":"Sign up","project.users.UpdateProfile.title":"Update profile"},es:{"project.app.Footer.text":"PA Shop - Area de Ingenier\xeda Telem\xe1tica - Universidad de A Coru\xf1a","project.app.Header.home":"Inicio","project.app.Header.logout":"Salir","project.shopping.header.orders":"Pedidos","project.app.Home.welcome":"Busque en nuestro cat\xe1logo de productos.","project.catalog.CategorySelector.allDepartments":"Todos los departamentos","project.catalog.FindProductsResult.noProductsFound":"No se encontraron productos","project.common.ErrorDialog.title":"Error","project.global.buttons.buy":"Comprar","project.global.buttons.cancel":"Cancelar","project.global.buttons.close":"Cerrar","project.global.buttons.next":"Siguiente","project.global.buttons.ok":"OK","project.global.buttons.back":"Anterior","project.global.buttons.save":"Guardar","project.global.buttons.search":"Buscar","project.global.exceptions.NetworkError":"Fallo de comunicaci\xf3n","project.global.fields.date":"Fecha","project.global.fields.department":"Departamento","project.global.fields.email":"Correo electr\xf3nico","project.global.fields.firstName":"Nombre","project.global.fields.purchaseOrder":"Orden de compra","project.global.fields.lastName":"Apellidos","project.global.fields.name":"Nombre","project.global.fields.password":"Contrase\xf1a","project.global.fields.postalAddress":"Direcci\xf3n postal","project.global.fields.postalCode":"C\xf3digo postal","project.global.fields.price":"Precio","project.global.fields.quantity":"Cantidad","project.global.fields.totalPrice":"Precio total","project.global.fields.userName":"Usuario","project.global.validator.email":"Introduzca una direcci\xf3n de correo electr\xf3nico correcta","project.global.validator.incorrectQuantity":"Cantidad incorrecta","project.global.validator.passwordsDoNotMatch":"Las contrase\xf1as no coinciden","project.global.validator.required":"Campo obligatorio","project.shopping.AddToCart.add":"A\xf1adir al carrito","project.shopping.BuyForm.title":"Comprar","project.shopping.FindOrdersResult.noOrders":"No se encontraron pedidos","project.shopping.PurchaseCompleted.purchaseOrderGenerated":"Orden de compra generada","project.shopping.ShoppingCart.empty":"El carrito est\xe1 vac\xedo","project.users.ChangePassword.fields.confirmNewPassword":"Confirmar contrase\xf1a nueva","project.users.ChangePassword.fields.newPassword":"Contrase\xf1a nueva","project.users.ChangePassword.fields.oldPassword":"Contrase\xf1a antigua","project.users.ChangePassword.title":"Cambiar contrase\xf1a","project.users.Login.title":"Autenticarse","project.users.SignUp.fields.confirmPassword":"Confirmar contrase\xf1a","project.users.SignUp.title":"Registrarse","project.users.UpdateProfile.title":"Actualizar perfil"},gl:{"project.app.Footer.text":"PA Shop - Area de Enxe\xf1ar\xeda Telem\xe1tica - Universidade da Coru\xf1a","project.app.Header.home":"Inicio","project.app.Header.logout":"Sa\xedr","project.shopping.header.orders":"Pedidos","project.app.Home.welcome":"Busque no noso cat\xe1logo de productos.","project.catalog.CategorySelector.allDepartments":"T\xf3dolos departamentos","project.catalog.FindProductsResult.noProductsFound":"No se atoparon productos","project.common.ErrorDialog.title":"Erro","project.global.buttons.buy":"Mercar","project.global.buttons.cancel":"Cancelar","project.global.buttons.close":"Cerrar","project.global.buttons.next":"Seguinte","project.global.buttons.ok":"OK","project.global.buttons.back":"Anterior","project.global.buttons.save":"Gardar","project.global.buttons.search":"Buscar","project.global.exceptions.NetworkError":"Erro de comunicaci\xf3n","project.global.fields.date":"Data","project.global.fields.department":"Departamento","project.global.fields.email":"Correo electr\xf3nico","project.global.fields.firstName":"Nome","project.global.fields.purchaseOrder":"Orden de compra","project.global.fields.lastName":"Apelidos","project.global.fields.name":"Nome","project.global.fields.password":"Contrasinal","project.global.fields.postalAddress":"Direcci\xf3n postal","project.global.fields.postalCode":"C\xf3digo postal","project.global.fields.price":"Prezo","project.global.fields.quantity":"Cantidade","project.global.fields.totalPrice":"Prezo total","project.global.fields.userName":"Usuario","project.global.validator.email":"Introduzca unha direcci\xf3n de correo electr\xf3nico correcta","project.global.validator.incorrectQuantity":"Cantidade incorrecta","project.global.validator.passwordsDoNotMatch":"As contrasinais non coinciden","project.global.validator.required":"Campo obrigatorio","project.shopping.AddToCart.add":"Engadir ao carrito","project.shopping.BuyForm.title":"Mercar","project.shopping.FindOrdersResult.noOrders":"Non se atoparon pedidos","project.shopping.PurchaseCompleted.purchaseOrderGenerated":"Orden de compra xerada","project.shopping.ShoppingCart.empty":"O carro est\xe1 baleiro","project.users.ChangePassword.fields.confirmNewPassword":"Confirmar contrasinal nova","project.users.ChangePassword.fields.newPassword":"Contrasinal nova","project.users.ChangePassword.fields.oldPassword":"Contrasinal antiga","project.users.ChangePassword.title":"Cambiar contrasinal","project.users.Login.title":"Autenticarse","project.users.SignUp.fields.confirmPassword":"Confirmar contrasinal","project.users.SignUp.title":"Rexistrarse","project.users.UpdateProfile.title":"Actualizar perfil"}},za=(a(124),Ha());Se.init((function(e){return za.dispatch(Qa.actions.error(new ne))}));var Ka=function(){var e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage||"en",t=e.toLowerCase().split(/[_-]+/)[0],a=Wa[e]||Wa[t]||Wa.en;return{locale:e=a===Wa.en?"en":e,messages:a}}(),Ja=Ka.locale,Ya=Ka.messages;E.a.render(b.a.createElement(j.a,{store:za},b.a.createElement(N.a,{locale:Ja,messages:Ya},b.a.createElement(Ga,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");y?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):w(t,e)}))}}()},80:function(e,t,a){e.exports=a(125)}},[[80,1,2]]]);
//# sourceMappingURL=main.e3e34fd2.chunk.js.map